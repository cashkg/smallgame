<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ•¸ç¨ç«¶æŠ€å ´ | Sudoku Arena</title>
    <link rel="stylesheet" href="./style.css">
    <style>
        /* ç·Šæ€¥ UI ä¿®æ­£ï¼šç¢ºä¿å¤§å»³ä¸æœƒæ¶ˆå¤±ä¸”å…·å‚™åŸºæœ¬å¤–è§€ */
        .screen { display: none; width: 100%; max-width: 480px; flex-direction: column; padding: 15px; box-sizing: border-box; }
        .screen.active { display: flex !important; }
        .rank-banner { background: #2C3E50; color: white; padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px; }
        .total-score-val { color: #F1C40F; font-size: 28px; font-weight: bold; margin: 5px 0; }
        .difficulty-group { display: flex; gap: 10px; margin-bottom: 15px; }
        .diff-btn { flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #ccc; background: white; cursor: pointer; }
        .limit-mode-zone { background: #FFF3E0; padding: 15px; border-radius: 12px; margin-bottom: 15px; }
        .score-preview-box { background: white; border: 2px solid #F1C40F; border-radius: 50px; padding: 8px; margin-top: 10px; text-align: center; }
        .main-btn.primary { background: #4A90E2; color: white; border: none; padding: 18px; border-radius: 50px; font-size: 20px; font-weight: bold; cursor: pointer; }
        .hidden { display: none !important; }
    </style>
</head>
<body style="margin:0; display:flex; justify-content:center; background:#F8F9FA;">

    <div id="setup-page" class="screen active">
        <div class="rank-banner">
            <div id="player-rank-tag" style="font-size: 14px; opacity: 0.8;">è¼‰å…¥ä¸­...</div>
            <div class="total-score-val" id="display-total-score">0</div>
            <div style="font-size: 12px; opacity: 0.7;">ç´¯è¨ˆç«¶æŠ€ç©åˆ†</div>
        </div>

        <div class="section-title" style="font-weight:bold; margin-bottom:10px;">æŒ‘æˆ°é›£åº¦</div>
        <div class="difficulty-group">
            <button class="diff-btn" onclick="selectDifficulty(35)">åˆç´š 35</button>
            <button class="diff-btn" onclick="selectDifficulty(42)">ä¸­ç´š 42</button>
            <button class="diff-btn" onclick="selectDifficulty(49)">é«˜ç´š 49</button>
        </div>

        <div class="limit-mode-zone">
            <div style="font-weight:bold; color:#E67E22; margin-bottom:10px;">ğŸ”¥ æ¥µé™æ¨¡å¼ (50-64æ ¼)</div>
            <div style="display:flex; justify-content:center; align-items:center; gap:20px;">
                <button class="step-btn" onclick="adjustLimit(-1)" style="width:40px; height:40px; font-size:24px;">âˆ’</button>
                <span id="limit-display" style="font-size:32px; font-weight:bold; width:60px; text-align:center;">50</span>
                <button class="step-btn" onclick="adjustLimit(1)" style="width:40px; height:40px; font-size:24px;">+</button>
            </div>
            <div class="score-preview-box">
                <span id="score-preview" style="color:#D35400; font-weight:bold;">åŠ æ¬Š: x8.0</span>
            </div>
        </div>

        <div id="arena-code" style="font-size:10px; color:#999; text-align:center; margin-bottom:15px; font-family:monospace;">SEED: Generating...</div>

        <div style="display:flex; flex-direction:column; gap:10px;">
            <button class="main-btn primary" onclick="startGame()">é€²å…¥ç«¶æŠ€å ´</button>
            <button id="resume-btn" class="hidden" onclick="resumeGame()" style="padding:12px; border:none; border-radius:10px; background:#95A5A6; color:white;">ç¹¼çºŒä¸Šä¸€å±€</button>
            <button onclick="location.href='../../index.html'" style="background:none; border:none; color:#777; padding:10px;">å›ä¸»å¤§å»³</button>
        </div>
    </div>

    <div id="game-page" class="screen">
        <div style="display:flex; justify-content:space-between; align-items:center; background:#4A90E2; color:white; padding:12px; border-radius:10px; margin-bottom:15px;">
            <div style="font-size:14px;">é›£åº¦: <span id="current-diff-display">--</span> (<span id="current-coeff-display">x1.0</span>)</div>
            <div style="font-weight:bold;">â± <span id="timer">00:00</span></div>
            <button onclick="confirmExit()" style="background:#E74C3C; color:white; border:none; border-radius:5px; padding:5px 12px;">é€€å‡º</button>
        </div>
        
        <div id="sudoku-board" class="sudoku-board"></div>
        
        <div class="controls" style="margin-top:20px;">
            <div style="display:flex; gap:10px; margin-bottom:15px;">
                <button id="note-mode-btn" onclick="toggleNoteMode()" style="flex:1; padding:12px; border-radius:8px; border:1px solid #ccc; background:white;">âœï¸ ç­†è¨˜: é—œ</button>
                <button onclick="eraseCell()" style="flex:1; padding:12px; border-radius:8px; border:1px solid #ccc; background:white;">âŒ« æ“¦é™¤</button>
            </div>
            <div class="numpad">
                <button onclick="inputAction(1)">1</button><button onclick="inputAction(2)">2</button><button onclick="inputAction(3)">3</button>
                <button onclick="inputAction(4)">4</button><button onclick="inputAction(5)">5</button><button onclick="inputAction(6)">6</button>
                <button onclick="inputAction(7)">7</button><button onclick="inputAction(8)">8</button><button onclick="inputAction(9)">9</button>
            </div>
        </div>
    </div>

    <script src="./js/engine.js"></script>
    <script src="./js/app.js"></script>
</body>
</html>
