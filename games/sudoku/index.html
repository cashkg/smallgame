<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>數獨競技場 | Sudoku Arena</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="setup-page" class="screen active">
        <div class="rank-banner">
            <div id="player-rank-tag">載入中...</div>
            <div id="display-total-score" style="font-size: 24px; font-weight: bold; color: #F1C40F;">0</div>
        </div>

        <div class="difficulty-group" style="display: flex; gap: 8px; margin-bottom: 10px;">
            <button class="diff-btn" onclick="selectDifficulty(35)">初級 35</button>
            <button class="diff-btn" onclick="selectDifficulty(42)">中級 42</button>
            <button class="diff-btn" onclick="selectDifficulty(49)">高級 49</button>
        </div>

        <div class="limit-mode-zone">
            <div style="font-weight: bold; color: #e67e22;">🔥 極限模式 (50-64格)</div>
            <div class="stepper-box" style="display: flex; align-items: center; justify-content: center; gap: 15px;">
                <button class="step-btn" onclick="adjustLimit(-1)">−</button>
                <span id="limit-display">50</span>
                <button class="step-btn" onclick="adjustLimit(1)">+</button>
            </div>
            <div id="score-preview" style="text-align: center; color: #D35400; font-weight: bold;">x8.0</div>
        </div>

        <div class="code-zone" style="background:#eee; padding:10px; border-radius:8px; margin-top:10px;">
            <div style="font-size: 10px; color: #777;">競技種子碼：</div>
            <div id="arena-code" style="font-family: monospace; font-size: 12px; word-break: break-all;">Generating...</div>
        </div>

        <div class="action-zone" style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
            <button class="main-btn primary" onclick="startGame()">進入競技場</button>
            <button onclick="location.href='../../index.html'" style="background:none; border:none; color:#777;">回大廳</button>
        </div>
    </div>

    <div id="game-page" class="screen">
        <div class="game-header" style="display:flex; justify-content:space-between; align-items:center; background:#4A90E2; color:white; padding:10px; border-radius:8px;">
            <div>難度: <span id="current-diff-display">--</span></div>
            <div>⏱ <span id="timer">00:00</span></div>
            <button onclick="confirmExit()" style="background:#E74C3C; color:white; border:none; border-radius:4px; padding:4px 10px;">退出</button>
        </div>
        
        <div id="sudoku-board" class="sudoku-board"></div>
        
        <div class="controls">
            <div class="tools" style="display: flex; gap: 10px; margin-bottom: 10px;">
                <button id="note-mode-btn" onclick="toggleNoteMode()" style="flex:1;">✏️ 筆記: 關</button>
                <button onclick="eraseCell()" style="flex:1;">⌫ 擦除</button>
            </div>
            <div class="numpad">
                <button onclick="inputAction(1)">1</button><button onclick="inputAction(2)">2</button><button onclick="inputAction(3)">3</button>
                <button onclick="inputAction(4)">4</button><button onclick="inputAction(5)">5</button><button onclick="inputAction(6)">6</button>
                <button onclick="inputAction(7)">7</button><button onclick="inputAction(8)">8</button><button onclick="inputAction(9)">9</button>
            </div>
        </div>
    </div>
    
    <script src="./js/engine.js"></script>
    <script src="./js/app.js"></script>
</body>
</html>
